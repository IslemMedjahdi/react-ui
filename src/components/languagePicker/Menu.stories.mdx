import { Meta, Story, Canvas, ArgsTable } from '@storybook/addon-docs'
import { Menu } from './Menu'
import { MenuItem } from './MenuItem'

<Meta title="Components/Menu/Menu" component={Menu} />

# Menu

This component can be used to generate a simple dropdown menu.

It leverages on the component [MenuItem](/docs/components-menu-menuitem--default-story) and the npm package [@reach/menu-button](https://www.npmjs.com/package/@reach/menu-button).

_**Important**_: the text and icon color for the tailwind class `lg` are set to white.

export const Template = ({ menuLabel, className, ...args }) => {
  const array = [1, 2, 3]
  return (
    <Menu {...args} menuLabel={menuLabel} className={className}>
      {array.map((item, index) => (
        <MenuItem
          onClick={() => alert(`Menu item ${index + 1} was pressed`)}
          key={index}
        >
          {`Menu item ${item}`}
        </MenuItem>
      ))}
    </Menu>
  )
}

<Canvas>
  <Story
    name="Default"
    args={{
      menuLabel: 'Menu',
      className: 'lg:bg-primary',
      text: 'Menu',
    }}
  >
    {Template.bind({})}
  </Story>
</Canvas>

### Props

<ArgsTable story="Default" />

### Theme

- `menu.menuButton.base`: Define the flexbox and the interactions with hover and active for the menu button.
- `menu.menuButton.text.base`
- `menu.menuButton.text.normal`: Define the text color for the language to the left of the icon.
- `menu.menuButton.icon.base`: Define the width and height for the icon.
- `menu.menuButton.icon.normal`: Define the color for the icon.
- `menu.menuList.base`: Define the margin and padding for the menu list.
- `menu.menuList.normal`: Define the background color of the menu list.

## LanguagePicker

With the menu component it is easily possible to convert it to a language picker. Such a new component will detect the default languages of a browser and if needed change it to english.
Furthermore, it will allow the user to switch among the provided languages.

For the implementation the following package is require `@aboutbits/internationalization`

```JSX
const intl = useIntl()
const currentLocale = intl.locale
return (
  <Menu
    menuLabel='Language Menu'
    text={currentLocale}
  >
    {i18n.supportedLanguages.map((supportedLanguage, index) => (
      <MenuItem
        key={index}
        onClick={() => {
          i18n.setLanguage(supportedLanguage)
          window.location.reload()
        }}
      >
        {locales[supportedLanguage]}
      </MenuItem>
    ))}
  </Menu>
)
```

```TS
import Internationalization from '@aboutbits/internationalization'

enum Language {
  IT = 'IT',
  DE = 'DE',
  EN = 'EN',
}

const locales: Record<Language, string> = {
  [Language.EN]: 'English',
  [Language.DE]: 'Deutsch',
  [Language.IT]: 'Italiano',
}

const supportedLanguages = [Language.EN, Language.IT, Language.DE]
const fallbackLanguage = Language.EN

const i18n = new Internationalization(
  supportedLanguages,
  fallbackLanguage,
  'Language'
)

export { i18n, locales }
```
