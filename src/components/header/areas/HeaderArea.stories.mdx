import { Meta, Story, Canvas, ArgsTable } from '@storybook/addon-docs'
import { HeaderArea } from './HeaderArea'
import { IntlProvider } from 'react-intl'
import { MenuProvider } from './MenuContext'
import { HeaderTitle } from './HeaderTitle'
import { HeaderBackAction } from '../actions/HeaderBackAction'
import IconArrowBack from '@aboutbits/react-material-icons/dist/IconArrowBack'

<Meta title="Components/Header/HeaderArea" component={HeaderArea} />

# HeaderArea

This component defines the main logic of a page header. It adjusts its styling for mobile, such that a burger menu will appear.

If the `navigation` property has a value assigned, it will always be displayed on the left of the title and on the mobile view, the burger menu will not appear.

In any case, this component needs be wrapped in a `IntlProvider` and `MenuProvider`.

- IntlProvider is taken from `react-intl`
- MenuProvider is a self-written component:

```jsx
import React from 'react'

type MenuState = boolean
type MenuToggle = () => void

const MenuStateContext =
  (React.createContext < MenuState) | (undefined > undefined)
const MenuToggleContext =
  (React.createContext < MenuToggle) | (undefined > undefined)

const navigationReducer = (state: MenuState): MenuState => {
  return !state
}

const MenuProvider: React.FC = ({ children }) => {
  const [state, toggle] = React.useReducer(navigationReducer, false)

  return (
    <MenuStateContext.Provider value={state}>
      <MenuToggleContext.Provider value={toggle}>
        {children}
      </MenuToggleContext.Provider>
    </MenuStateContext.Provider>
  )
}

const useMenuToggle = (): MenuToggle => {
  const context = React.useContext(MenuToggleContext)

  if (context === undefined) {
    throw new Error('useMenuDispatch must be used within a MenuProvider')
  }

  return context
}

export { MenuProvider, useMenuToggle }
```

export const Template = ({ ...args }) => (
  <IntlProvider
    locale="en"
    messages={{
      'app.nav.menu': 'Menu',
    }}
  >
    <MenuProvider>
      <HeaderArea {...args} />
    </MenuProvider>
  </IntlProvider>
)

<Canvas>
  <Story
    name="Default"
    args={{ children: <HeaderTitle>Header Title</HeaderTitle> }}
  >
    {Template.bind({})}
  </Story>
</Canvas>

### Props:

<ArgsTable story="Default" />

## Navigation

<Canvas>
  <Story
    name="Navigation"
    args={{
      navigation: (
        <HeaderBackAction
          icon={IconArrowBack}
          label="Go to previous page"
          onClick={() => alert('Back action was triggered')}
        />
      ),
      children: <HeaderTitle>Sneakers</HeaderTitle>,
    }}
  >
    {Template.bind({})}
  </Story>
</Canvas>
