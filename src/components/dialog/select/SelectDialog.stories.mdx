import { Meta, Story, Canvas, ArgsTable } from '@storybook/addon-docs'
import { useState } from 'react'
import { Button, Tone } from '../../button/Button'
import { MenuProvider } from '../../header/areas/MenuContext'
import { SectionContentList, SectionListItem } from '../../section'
import { SelectDialog } from './SelectDialog'

<Meta title="Components/Dialog/SelectDialog" component={SelectDialog} />

# SelectDialog

This component is used to have a dynamic search and select within a dialog window.

It leverages on the component [SelectDialogHeader](/docs/components-dialog-selectdialogheader--default-story) which provides the search logic.

export const Template = ({
  buttonText,
  buttonTone,
  title,
  iconLabel,
  dialogLabel,
  ...args
}) => {
  const [toggle, setToggle] = useState(false)
  const [text, setText] = useState('')
  const clearSearch = () => setText('')
  const userList = ['User 1', 'User 2', 'User 3']
  return (
    <MenuProvider>
      {toggle ? (
        <SelectDialog
          {...args}
          title={title}
          iconLabel={iconLabel}
          search={text}
          actions={{ search: setText, clear: clearSearch }}
          onDismiss={() => setToggle(!toggle)}
          dialogLabel={dialogLabel}
        >
          <SectionContentList>
            {userList
              .filter((user) => user.toLowerCase().includes(text.toLowerCase()))
              .map((user, index) => (
                <SectionListItem key={index}>{user}</SectionListItem>
              ))}
          </SectionContentList>
        </SelectDialog>
      ) : (
        <Button tone={buttonTone} onClick={() => setToggle(!toggle)}>
          {buttonText}
        </Button>
      )}
    </MenuProvider>
  )
}

<Canvas>
  <Story
    name="Default"
    args={{
      title: 'Select Dialog',
      iconLabel: 'Open search',
      buttonText: 'Reset Notification',
      buttonTone: Tone.primary,
      dialogLabel: 'Select dialog',
    }}
  >
    {Template.bind({})}
  </Story>
</Canvas>

### Props:

<ArgsTable story="Default" />

### Theme:

- `dialog.select.base`: Define the size of the select dialog window.
- `dialog.select.normal`: Define the background color of the select dialog window.
