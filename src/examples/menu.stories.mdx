import { Meta, Story, Canvas } from '@storybook/addon-docs'
import { useIntl } from 'react-intl'
import { action } from '@storybook/addon-actions'
import { Menu } from '../components/menu/Menu'
import { MenuItem } from '../components/menu/MenuItem'
import { i18n, locales } from './i18n'

<Meta title="Examples/Menu" />

# Menu

The following example provides a language picker using the menu components. It allows the user to switch among the provided languages.

export const Template = () => {
  const intl = useIntl()
  const currentLocale = intl.locale.toUpperCase()
  return (
    <Menu menuButtonContent={currentLocale} menuLabel="">
      {i18n.supportedLanguages.map((supportedLanguage, index) => (
        <MenuItem
          onClick={() => {
            i18n.setLanguage(supportedLanguage)
            action('onClick')(supportedLanguage)
            // window.location.reload()
          }}
          key={index}
        >
          {locales[supportedLanguage]}
        </MenuItem>
      ))}
    </Menu>
  )
}

<Canvas>
  <Story name="Default">{Template.bind({})}</Story>
</Canvas>
