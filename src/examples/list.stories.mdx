import { Meta, Story, Canvas, ArgsTable } from '@storybook/addon-docs'
import { action } from '@storybook/addon-actions'
import { useState } from 'react'
import IconFilterList from '@aboutbits/react-material-icons/dist/IconFilterList'
import {
  Section,
  SectionContentList,
  SectionContentListEmpty,
  SectionHeader,
  SectionSearch,
  SectionAction,
  SectionListItemButton,
  SectionFooter,
} from '../components/section'
import { PaginationInMemory } from '../components/pagination/PaginationInMemory'

<Meta title="Examples/List" />

# List

The following example shows how multiple section components and the in memory pagination are used to create an overview list.

Changing the properties `numberOfTotalItems` and `numberOfItemsPerPage` will change the number of pages and/or the number the of items per page.

Setting `numberOfTotalItems` to 0 will reveal the placeholder for the empty list.

export const Template = ({ numberOfTotalItems, numberOfItemsPerPage }) => {
  const [page, setPage] = useState(1)
  const [search, setSearch] = useState('')
  const [filterShow, setFilterShow] = useState(false)
  const content = Array.from(Array(numberOfTotalItems).keys())
    .map((item) => `User ${item + 1}`)
    .filter((item) => item.includes(search))
  return (
    <Section>
      <SectionHeader>
        <SectionSearch
          title="List of users"
          search={search}
          actions={{ search: setSearch, clear: () => setSearch('') }}
        />
        <SectionAction
          Icon={IconFilterList}
          label="Filter"
          onClick={() => {
            setFilterShow(!filterShow)
          }}
        />
      </SectionHeader>
      <SectionContentList>
        {content.length > 0 &&
          content
            .slice(
              (page - 1) * numberOfItemsPerPage,
              (page - 1) * numberOfItemsPerPage + numberOfItemsPerPage
            )
            .map((item) => (
              <SectionListItemButton
                key={item}
                onClick={() => action('clicked')}
              >
                {item}
              </SectionListItemButton>
            ))}
        {content.length === 0 && (
          <SectionContentListEmpty>
            No users found in database.
          </SectionContentListEmpty>
        )}
      </SectionContentList>
      <SectionFooter>
        <PaginationInMemory
          page={page}
          size={numberOfItemsPerPage}
          total={content.length}
          onChangePage={setPage}
        />
      </SectionFooter>
    </Section>
  )
}

<Canvas>
  <Story
    name="Default"
    args={{
      numberOfTotalItems: 1000,
      numberOfItemsPerPage: 5,
    }}
  >
    {Template.bind({})}
  </Story>
</Canvas>

### Props

<ArgsTable story="Default" />
